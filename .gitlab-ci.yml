# ---------- STAGES ----------
stages:
  - build
  - test
  - sonar
  - deploy

# ---------- DEFAULTS ----------
default:
  retry: 1
  before_script:
    - echo "Branch=$CI_COMMIT_BRANCH | SHA=$CI_COMMIT_SHORT_SHA"

# ---------- SENTINELA (verifica que el pipeline arranca) ----------
pipeline_ok:
  stage: build
  script:
    - echo "Pipeline iniciado correctamente ✅"

# ---------- TEST DE COMPROBACIÓN ----------
test_placeholder:
  stage: test
  script:
    - echo "Ejecutando test simulado..."
    - echo "Tests OK ✅"

# ---------- SONAR (simulado) ----------
sonar_placeholder:
  stage: sonar
  script:
    - echo "Análisis Sonar simulado... OK ✅"

# ---------- DEPLOY (solo visible manualmente) ----------
deploy:
  stage: deploy
  when: manual
  script:
    - echo "Deploy pendiente — se implementará más adelante (F3-4)"